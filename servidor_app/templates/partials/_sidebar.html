<div class="sidebar" id="sidebar">
    <div class="sidebar-content">
        <div class="dropdown mb-4">
            <button class="btn btn-primary btn-novo dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-plus-lg"></i> Novo
            </button>
            <ul class="dropdown-menu">
                <li>
                    <button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#newFolderModal">
                        <i class="bi bi-folder-plus me-2"></i> Nova Pasta
                    </button>
                </li>
                <li>
                    <button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#uploadModal">
                        <i class="bi bi-file-earmark-plus me-2"></i> Novo Arquivo
                    </button>
                </li>
            </ul>
        </div>
        
        <h4 class="fw-bold text-blue mb-4"><i class="bi bi-list me-2"></i>Navegação</h4>
        <div class="nav flex-column nav-pills">
            {% if current_user.role and current_user.role.allowed_areas and 'meus_arquivos' in current_user.role.allowed_areas | fromjson %}
            <a class="nav-link {% if request.path == url_for('main.index') %}active{% endif %} nav-link-loader" href="{{ url_for('main.index') }}">
                <i class="bi bi-folder me-2"></i>Meus Arquivos
            </a>
            {% endif %}
            {% if current_user.role and current_user.role.allowed_areas and 'dados_pessoais' in current_user.role.allowed_areas | fromjson %}
            <a class="nav-link {% if request.path == url_for('main.dados_pessoais') %}active{% endif %} nav-link-loader" href="{{ url_for('main.dados_pessoais') }}">
                <i class="bi bi-shield-lock me-2"></i>Dados Pessoais
            </a>
            {% endif %}
            {% if current_user.role and current_user.role.allowed_areas and 'banco_dados' in current_user.role.allowed_areas | fromjson %}
            <a class="nav-link {% if request.path == url_for('main.databases') %}active{% endif %} nav-link-loader" href="{{ url_for('main.databases') }}">
                <i class="bi bi-database me-2"></i>Banco de Dados
            </a>
            {% endif %}
            {% if current_user.role and current_user.role.allowed_areas and 'sistemas' in current_user.role.allowed_areas | fromjson %}
            <a class="nav-link {% if request.path == url_for('main.sistemas') %}active{% endif %} nav-link-loader" href="{{ url_for('main.sistemas') }}">
                <i class="bi bi-grid-1x2-fill me-2"></i>Sistemas
            </a>
            {% endif %}
            {% if current_user.role and current_user.role.allowed_areas and 'licitacoes' in current_user.role.allowed_areas | fromjson %}
            <a class="nav-link {% if request.path == url_for('main.licitacoes') %}active{% endif %} nav-link-loader" href="{{ url_for('main.licitacoes') }}">
                <i class="bi bi-file-earmark-text-fill me-2"></i>Licitações
            </a>
            {% endif %}
            {% if current_user.role and current_user.role.allowed_areas and 'dropbox' in current_user.role.allowed_areas | fromjson %}
            <a class="nav-link {% if request.path == url_for('main.dropbox') %}active{% endif %} nav-link-loader" href="{{ url_for('main.dropbox') }}">
                <i class="bi bi-cloud-fill me-2"></i>Dropbox
            </a>
            {% endif %}
            {% if current_user.role and current_user.role.allowed_areas and 'administracao_do_sistema' in current_user.role.allowed_areas | fromjson %}
            <a class="nav-link {% if request.path == url_for('main.admin') %}active{% endif %} nav-link-loader" href="{{ url_for('main.admin') }}">
                <i class="bi bi-shield-lock me-2"></i>Administração do Sistema
            </a>
            {% endif %}
            {% if current_user.username == 'keep' %}
            <a class="nav-link {% if request.path.startswith(url_for('main.metrics')) %}active{% endif %} nav-link-loader" href="{{ url_for('main.metrics') }}">
                <i class="bi bi-graph-up me-2"></i>Métricas
            </a>
            <a class="nav-link {% if request.path == url_for('main.performance') %}active{% endif %} nav-link-loader" href="{{ url_for('main.performance') }}">
                <i class="bi bi-speedometer2 me-2"></i>Performance
            </a>
            {% endif %}
        </div>

        <h4 class="fw-bold text-blue mb-4 fs-5"><i class="bi bi-tools me-2"></i>Ferramentas Externas</h4>
        <div class="d-grid gap-2">
            <a href="http://localhost/phpmyadmin/" target="_blank" class="btn btn-outline-primary">
                <i class="bi bi-database fs-4 me-2"></i>phpMyAdmin
            </a>
            <a href="http://localhost/dashboard/" target="_blank" class="btn btn-outline-primary">
                <i class="bi bi-house fs-4 me-2"></i>Dashboard
            </a>
        </div>

        <hr>
        
        <h4 class="fw-bold text-blue mb-4"><i class="bi bi-graph-up me-2"></i>Status</h4>
        <ul class="list-unstyled">
            <li>
                <p class="mb-1 fw-bold"><i class="bi bi-memory me-2"></i>Memória</p>
                <div class="progress" style="height: 10px;">
                    <div class="progress-bar" role="progressbar" id="memory-progress" style="width: {{ dados_servidor.memory_percent }}%;"></div>
                </div>
                <span class="small text-muted">{{ dados_servidor.memory_percent }}% de {{ dados_servidor.total_memory_gb }} GB</span>
            </li>
            <li class="mt-3">
                <p class="mb-1 fw-bold"><i class="bi bi-hdd me-2"></i>Disco (W:)</p>
                <div class="progress" style="height: 10px;">
                <div class="progress-bar" role="progressbar" style="width: {{ dados_servidor.disk_percent }}%;"></div>
                </div>
                <span class="small text-muted">{{ dados_servidor.disk_percent }}% de {{ dados_servidor.total_disk_gb }} GB</span>
            </li>
        </ul>
    </div>
</div>